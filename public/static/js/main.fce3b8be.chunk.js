(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(19),o=n.n(r),a=n(7),s=(n(24),n(4)),i=(n(25),n(1));var j=function(e){var t=e.setUser,n=Object(c.useState)(""),r=Object(s.a)(n,2),o=r[0],a=r[1],j=Object(c.useState)(""),u=Object(s.a)(j,2),l=u[0],b=u[1],d=Object(c.useState)(""),h=Object(s.a)(d,2),O=h[0],p=h[1],f=Object(c.useState)(""),m=Object(s.a)(f,2),x=m[0],g=m[1],v=Object(c.useState)(""),y=Object(s.a)(v,2),S=y[0],C=y[1],N=Object(c.useState)(""),w=Object(s.a)(N,2),_=w[0],T=w[1],k=Object(c.useState)([]),P=Object(s.a)(k,2),E=P[0],D=P[1],I=Object(c.useState)(!0),U=Object(s.a)(I,2),F=U[0],L=U[1];return console.log(E),Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{onClick:function(e){e.preventDefault(),L(!F)},children:"Signup"}),F?null:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={full_name:o,username:l,email:O,password:x,password_confirmation:S,user_type:_};fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?e.json().then((function(e){t(e)})):e.json().then((function(e){return D(e.errors)}))}))},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"text",name:"full_name",placeholder:"Full Name",value:o,onChange:function(e){return a(e.target.value)}}),Object(i.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:l,onChange:function(e){return b(e.target.value)}}),Object(i.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:O,onChange:function(e){return p(e.target.value)}}),Object(i.jsx)("input",{type:"text",name:"user_type",placeholder:"User Type",value:_,onChange:function(e){return T(e.target.value)}}),Object(i.jsx)("input",{type:"text",name:"password",placeholder:"Password",value:x,onChange:function(e){return g(e.target.value)}}),Object(i.jsx)("input",{type:"text",name:"conform_password",placeholder:"Conform Password",value:S,onChange:function(e){return C(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Signup"})})]}),Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:E.map((function(e){return Object(i.jsx)("li",{children:e},e)}))})})]})},u=n(3);var l=function(e){e.setUser;var t=Object(u.l)(),n=Object(c.useState)(""),r=Object(s.a)(n,2),o=r[0],a=r[1],j=Object(c.useState)(""),l=Object(s.a)(j,2),b=l[0],d=l[1],h=Object(c.useState)(!0),O=Object(s.a)(h,2),p=O[0],f=O[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{onClick:function(e){e.preventDefault(),f(!p)},children:"Login"}),p?null:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={username:o,password:b};fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok&&e.json().then((function(e){localStorage.setItem("jwt",e.token),t("/profile")}))}))},children:[Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:o,onChange:function(e){return a(e.target.value)}})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:b,onChange:function(e){return d(e.target.value)}})}),Object(i.jsx)("input",{type:"submit",value:"Login"})]})]})},b=function(e){e.setUser;var t=Object(u.l)();return Object(i.jsx)("button",{onClick:function(){localStorage.removeItem("jwt"),t("/login")},children:"Logout"})},d=n(6),h=function(){var e=localStorage.getItem("jwt");return Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("/products",{method:"DELETE",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},className:"btn btn-primary",children:"DELETE"})})},O=function(e){var t=e.food,n=e.user;return Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"food-card",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{className:"foodImage",src:t.picture,alt:t.food_name}),Object(i.jsx)("h3",{children:t.food_name}),Object(i.jsxs)("p",{children:["Ingre:",t.ingredient]}),Object(i.jsxs)("p",{children:["$:",t.price]}),"chef"===n.user_type?Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"btn btn-primary",children:"Edit"}),Object(i.jsx)(h,{food:t})]}):Object(i.jsx)("button",{className:"btn btn-primary",children:"Add to Cart"})]})})})},p=function(e){var t=e.foods,n=(e.newFood,e.user);return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsx)(O,{food:e,user:n},e.id)}))})})};var f=function(e){var t=e.user,n=Object(c.useState)([]),r=Object(s.a)(n,2),o=r[0],a=r[1];return console.log(t),Object(c.useEffect)((function(){fetch("/products").then((function(e){return e.json()})).then((function(e){return a(e)}))}),[]),console.log(o),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Logo"}),Object(i.jsx)("p",{children:"Welcome to the Dark Kitchen!"}),Object(i.jsx)("p",{children:" Here you can find the best food in the world "})]}),Object(i.jsx)("div",{children:Object(i.jsx)(p,{user:t,newFood:function(e){a([].concat(Object(d.a)(o),[e]))},foods:o})})]})};var m=function(e){var t=e.user,n=Object(u.l)(),r=Object(c.useState)(""),o=Object(s.a)(r,2),a=o[0],j=o[1],l=Object(c.useState)(""),b=Object(s.a)(l,2),d=b[0],h=b[1],O=Object(c.useState)(" "),p=Object(s.a)(O,2),f=p[0],m=p[1],x=Object(c.useState)(" "),g=Object(s.a)(x,2),v=g[0],y=g[1],S=Object(c.useState)(" "),C=Object(s.a)(S,2),N=C[0],w=C[1];console.log(t.user_type);var _=localStorage.getItem("jwt");return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:function(e){console.log(t.user_type),e.preventDefault(),"chef"===t.user_type&&(fetch("./products",{method:"POST",headers:{Authorization:"Bearer "+_,"Content-Type":"application/json"},body:JSON.stringify({food_name:a,price:d,ingredient:f,picture:v,category:N})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),j(""),h(""),m(""),y(""),w(""),n("/home"))},children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Food Name",value:a,onChange:function(e){return j(e.target.value)}}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Price",value:d,onChange:function(e){return h(e.target.value)}}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Ingredients",value:f,onChange:function(e){return m(e.target.value)}}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Picture",value:v,onChange:function(e){return y(e.target.value)}}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Category",value:N,onChange:function(e){return w(e.target.value)}})]}),Object(i.jsx)("button",{className:"btn btn-primary",children:"Submit"}),Object(i.jsx)("button",{onClick:function(e){if(console.log("the edit is comming"),e.preventDefault(),"chef"!==t.user_type)return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"jumbotron",children:[Object(i.jsxs)("h1",{className:"display-4",children:["Welcome, ",t.user_type,"!"]}),Object(i.jsx)("p",{className:"lead"})]})});fetch("/products/:id",{method:"PATCH",headers:{Authorization:"Bearer "+_,"Content-Type":"application/json"},body:JSON.stringify({food_name:a,price:d,ingredient:f,picture:v,category:N})}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},className:"btn btn-primary",children:"Update"})]})})},x=function(e){var t=e.user,n=Object(u.l)();return console.log(t),""===localStorage.getItem("jwt")?(n("/login"),console.log("no token found"),null):(console.log("token found"),Object(i.jsxs)("div",{children:[Object(i.jsx)("h4",{children:"Chef Profile"}),Object(i.jsx)(m,{user:t})]}))};var g=function(e){var t=e.user;return"chef"===t.user_type?Object(i.jsxs)("div",{children:[" ",Object(i.jsx)(x,{user:t}),Object(i.jsx)(b,{})]}):Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Profile"}),Object(i.jsx)(l,{}),Object(i.jsx)(b,{})]})};var v=function(){var e=Object(u.l)(),t=Object(c.useState)({}),n=Object(s.a)(t,2),r=n[0],o=n[1],a=localStorage.getItem("jwt");return console.log(a),Object(c.useEffect)((function(){fetch("/me",{method:"GET",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[a]),console.log(r.user_type),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{exact:!0,path:"/",element:Object(i.jsx)(f,{user:r})}),Object(i.jsx)(u.a,{exact:!0,path:"/home",element:Object(i.jsx)(f,{user:r})}),Object(i.jsx)(u.a,{path:"/login",element:Object(i.jsx)(l,{setUser:o})}),Object(i.jsx)(u.a,{path:"/signup",element:Object(i.jsx)(j,{setUser:o})}),Object(i.jsx)(u.a,{path:"/logout",element:Object(i.jsx)(b,{setUser:o})}),r?Object(i.jsx)(u.a,{path:"/profile",element:Object(i.jsx)(g,{user:r})}):e("/login")]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};o.a.render(Object(i.jsx)(a.a,{children:Object(i.jsx)(v,{})}),document.getElementById("root")),y()}},[[28,1,2]]]);
//# sourceMappingURL=main.fce3b8be.chunk.js.map